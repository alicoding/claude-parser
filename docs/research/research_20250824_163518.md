
## Research Query - 2025-08-24 16:35:33

**Query:** Python pre-commit hooks to enforce coding standards forbidden imports file size limits best practices

**Response:**

To enforce **coding standards, forbidden imports, and file size limits** in Python using pre-commit hooks, you should use the highest-level, library-based solutions available, as required by your strict library-first policy.

**Best-practice workflow:**

1. **Use pre-commit** as the framework to manage all hooks[3][1].
2. **Leverage existing, specialized hooks** for each requirement—avoid custom scripts unless absolutely necessary.

---

### 1. Enforcing Coding Standards

- **Linting:** Use the official Flake8 or pylint pre-commit hooks.
- **Formatting:** Use Black or isort hooks for code formatting.

**Example (.pre-commit-config.yaml):**
```yaml
repos:
  - repo: https://github.com/pre-commit/mirrors-flake8
    rev: v6.0.0
    hooks:
      - id: flake8

  - repo: https://github.com/psf/black
    rev: 24.3.0
    hooks:
      - id: black
```
These hooks will automatically enforce PEP8 and code formatting on every commit[1][5].

---

### 2. Forbidding Imports

- **Use the prebuilt forbid-check hook** from pre-commit-hooks, which blocks commits containing forbidden imports.

**Example (.pre-commit-config.yaml):**
```yaml
repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: forbid-check
        args: [--pattern, '^import\s+(json|datetime|requests|argparse|logging|urllib|asyncio|threading)$']
        files: \.py$
```
- Adjust the regex in `--pattern` to match your forbidden imports list (e.g., json, datetime, requests, etc.)[3].

---

### 3. Enforcing File Size Limits

- **Use the check-added-large-files hook** from pre-commit-hooks to block large files.

**Example (.pre-commit-config.yaml):**
```yaml
repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: check-added-large-files
        args: ['--maxkb=100']
```
This will prevent files larger than 100KB from being committed[4].

---

### 4. General Best Practices

- **Always use prebuilt hooks from the pre-commit ecosystem**—never write custom scripts unless no library exists[1][3].
- **Pin hook versions** for reproducibility.
- **Document your .pre-commit-config.yaml** so contributors understand enforced standards.
- **Run pre-commit install** after cloning to activate hooks locally[4].
- **Use pre-commit.ci** for server-side enforcement[1].

---

**Summary Table**

| Requirement         | Library Hook (pre-commit)                        | Example Hook ID                |
|---------------------|--------------------------------------------------|-------------------------------|
| Coding Standards    | mirrors-flake8, psf/black                        | flake8, black                 |
| Forbidden Imports   | pre-commit-hooks/forbid-check                    | forbid-check                  |
| File Size Limits    | pre-commit-hooks/check-added-large-files         | check-added-large-files       |

---

**Do not write custom code** for these checks—use the official hooks and configure them as shown above. If you need to enforce additional rules not covered by existing hooks, provide evidence that no such hook exists before proceeding with custom scripts, per your library-first mandate.

---
